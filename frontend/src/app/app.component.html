<p-table
  [value]="items"
  [paginator]="true"
  [rows]="10"
  [tableStyle]="{ 'min-width': '60vw', 'max-height': '90vh' }"
>
  <ng-template pTemplate="header">
    <tr>
      <th style="width: auto">Destination</th>
      <th style="width: auto">Airline</th>
      <th style="width: auto">Flight #</th>
      <th style="width: auto">Origin IATA</th>
      <th style="width: auto">Origin name</th>
      <th style="width: auto">Origin lat</th>
      <th style="width: auto">Origin lon</th>
      <th style="width: auto">Destination IATA</th>
      <th style="width: auto">Destination name</th>
      <th style="width: auto">Destination lat</th>
      <th style="width: auto">Destination lon</th>
      <th style="width: auto">Weather</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item>
    <tr>
      <td>{{ item.destination }}</td>
      <td>{{ item.airline }}</td>
      <td>{{ item.flight_num }}</td>
      <td>{{ item.origin_iata_code }}</td>
      <td>{{ item.origin_name }}</td>
      <td>{{ item.origin_latitude }}</td>
      <td>{{ item.origin_longitude }}</td>
      <td>{{ item.destination_iata_code }}</td>
      <td>{{ item.destination_name }}</td>
      <td>{{ item.destination_latitude }}</td>
      <td>{{ item.destination_longitude }}</td>
      <td>
        <p-button
          (onClick)="showDialog()"
          (mouseenter)="
            fetchWeather(item.origin_iata_code, item.destination_iata_code)
          "
          label="Weather"
        />
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog
  header="Weather for locations"
  [(visible)]="visible"
  [modal]="true"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: 'auto' }"
  [draggable]="false"
  [resizable]="false"
>
  <p-panel header="Origin Airport Forecast - weatherAirport1.IATA">
    <p-table
      [value]="processedWeatherAirport1"
      styleClass="p-datatable-striped"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: auto">Hour</th>
          <th style="width: auto">Temperature</th>
          <th style="width: auto">Apparent Temperature</th>
          <th style="width: auto">Precipitation Probability</th>
          <th style="width: auto">Precipitation</th>
          <th style="width: auto">WeatherCode</th>
          <th style="width: auto">Cloud Cover</th>
          <th style="width: auto">Cloud Cover Low</th>
          <th style="width: auto">Visibility</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-weather>
        <tr>
          <td>{{ weather.hour }}</td>
          <td>{{ weather.temperature }}</td>
          <td>{{ weather.apparentTemperature }}</td>
          <td>{{ weather.precipitationProbability }}</td>
          <td>{{ weather.precipitation }}</td>
          <td>{{ weather.weatherCode }}</td>
          <td>{{ weather.cloudCover }}</td>
          <td>{{ weather.cloudCoverLow }}</td>
          <td>{{ weather.visibility }}</td>
        </tr>
      </ng-template>
    </p-table>
  </p-panel>
  <p-divider />
  <p-panel header="Destination Airport Forecast">
    <p-table
      [value]="processedWeatherAirport2"
      styleClass="p-datatable-striped"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: auto">Hour</th>
          <th style="width: auto">Temperature</th>
          <th style="width: auto">Apparent Temperature</th>
          <th style="width: auto">Precipitation Probability</th>
          <th style="width: auto">Precipitation</th>
          <th style="width: auto">Weather Code</th>
          <th style="width: auto">Cloud Cover</th>
          <th style="width: auto">Cloud Cover Low</th>
          <th style="width: auto">Visibility</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-weather>
        <tr>
          <td>{{ weather.hour }}</td>
          <td>{{ weather.temperature }}</td>
          <td>{{ weather.apparentTemperature }}</td>
          <td>{{ weather.precipitationProbability }}</td>
          <td>{{ weather.precipitation }}</td>
          <td>{{ weather.weatherCode }}</td>
          <td>{{ weather.cloudCover }}</td>
          <td>{{ weather.cloudCoverLow }}</td>
          <td>{{ weather.visibility }}</td>
        </tr>
      </ng-template>
    </p-table>
  </p-panel>
</p-dialog>

<router-outlet />
